---
title: Learning Dart as a JavaScript developer
description: Leverage your JavaScript knowledge when learning Dart.
body_class: highlight-languages
lastVerified: 2022-11-21T00:00:00.000Z
---

è¿™ä¸ªæŒ‡å—æ—¨åœ¨åˆ©ç”¨ä½ çš„ JavaScript ç¼–ç¨‹çŸ¥è¯†æ¥å­¦ä¹  Dartã€‚
å®ƒå±•ç¤ºäº†ä¸¤ç§è¯­è¨€çš„ä¸»è¦ç›¸ä¼¼ä¹‹å¤„å’Œä¸åŒä¹‹å¤„ï¼Œå¹¶ä»‹ç»äº† JavaScript ä¸æ”¯æŒçš„ Dart æ¦‚å¿µã€‚
ä½œä¸º JavaScript å¼€å‘äººå‘˜ï¼ŒDart åº”è¯¥ä¼šæ„Ÿè§‰éå¸¸ç†Ÿæ‚‰ï¼Œå› ä¸ºè¿™ä¸¤ç§è¯­è¨€å…±äº«è®¸å¤šæ¦‚å¿µã€‚

ä¸ JavaScript ä¸€æ ·ï¼ŒDart è¿è¡Œåœ¨äº‹ä»¶å¾ªç¯ä¸Šï¼Œå› æ­¤ä¸¤ç§è¯­è¨€ä»¥ç±»ä¼¼çš„æ–¹å¼æ‰§è¡Œä»£ç ã€‚
ä¾‹å¦‚ï¼Œå¼‚æ­¥æ¦‚å¿µï¼Œå¦‚ futuresï¼ˆJavaScript ä¸­çš„ promisesï¼‰å’Œ `async/await` è¯­æ³•éå¸¸ç›¸ä¼¼ã€‚

Dart æ˜¯å¼ºç±»å‹çš„ï¼Œä¸åƒ JavaScriptã€‚
å¦‚æœä½ ä½¿ç”¨è¿‡ TypeScript æˆ– Flowï¼Œè¿™åº”è¯¥ä¼šç®€åŒ–å­¦ä¹  Dartã€‚
å¦‚æœä½ ä¸»è¦ä½¿ç”¨çº¯ JavaScriptï¼Œå¯èƒ½éœ€è¦æ›´å¤šçš„è°ƒæ•´ã€‚
æœ‰äº†å¼ºç±»å‹ï¼ŒDart å¯ä»¥åœ¨ç¼–è¯‘ä¹‹å‰æ•è·è®¸å¤šåœ¨ JavaScript ä»£ç ä¸­å¯èƒ½å­˜åœ¨çš„é”™è¯¯ã€‚

Dart é»˜è®¤å¯ç”¨ç©ºå®‰å…¨ã€‚
JavaScript ä¸æ”¯æŒç©ºå®‰å…¨ã€‚
ä½œä¸º JavaScript å¼€å‘äººå‘˜ï¼Œå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ¥å­¦ä¹ å¦‚ä½•ç¼–å†™ç©ºå®‰å…¨çš„ä»£ç ï¼Œä½†è¿™æ ·åšçš„å¥½å¤„æ˜¯æ›´å¥½åœ°é˜²æ­¢åœ¨ç¼–è¯‘ Dart ä»£ç ä¹‹å‰å°±æ£€æµ‹åˆ°çš„ç©ºå¼•ç”¨å¼‚å¸¸ã€‚ ï¼ˆä»è€Œé¿å…åœ¨å¯¹ JavaScript å˜é‡æ‰§è¡Œæ“ä½œæ—¶å‡ºç°çš„é‚£äº›å¯æ€•çš„ `TypeError`ã€‚ï¼‰

## çº¦å®šå’Œä»£ç æ£€æŸ¥

JavaScript å’Œ Dart éƒ½æœ‰ä»£ç æ£€æŸ¥å·¥å…·æ¥å¼ºåˆ¶æ‰§è¡Œæ ‡å‡†çº¦å®šã€‚
è™½ç„¶ JavaScript æä¾›äº†è®¸å¤šå·¥å…·ã€æ ‡å‡†å’Œé…ç½®ï¼ŒDart åªæœ‰ä¸€ä¸ªå®˜æ–¹çš„å¸ƒå±€å’Œæ ·å¼çº¦å®šé›†ä»¥åŠä¸€ä¸ªä»£ç æ£€æŸ¥å™¨æ¥ç®€åŒ–åˆè§„æ€§ã€‚
Dart åˆ†æå™¨ä¼šå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶æä¾›æ›´å¤šçš„åˆ†æåŠŸèƒ½ã€‚
è¦ä¸ºä½ çš„é¡¹ç›®è‡ªå®šä¹‰ä»£ç æ£€æŸ¥è§„åˆ™ï¼Œè¯·æŒ‰ç…§ [è‡ªå®šä¹‰é™æ€åˆ†æ][] è¯´æ˜ã€‚

Dart æä¾›äº† [`dart fix`][] æ¥æŸ¥æ‰¾å’Œä¿®å¤é”™è¯¯ã€‚

Dart è¿˜æä¾›äº†ç±»ä¼¼äº JavaScript å·¥å…· [Prettier][] çš„ä»£ç æ ¼å¼åŒ–ç¨‹åºã€‚
è¦åœ¨ä»»ä½• Dart é¡¹ç›®ä¸­æ ¼å¼åŒ–ä»£ç ï¼Œè¯·åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œ [`dart format`](/tools/dart-format)ã€‚
Dart å’Œ Flutter çš„ IDE æ’ä»¶ä¹Ÿæä¾›äº†è¿™ç§èƒ½åŠ›ã€‚

Dart æ”¯æŒåœ¨é›†åˆã€å‚æ•°æˆ–å‚æ•°åˆ—è¡¨çš„é€—å·åˆ†éš”åˆ—è¡¨ä¸­ä½¿ç”¨å°¾éšé€—å·ã€‚å½“ä½ æ·»åŠ å°¾éšé€—å·æ—¶ï¼Œæ ¼å¼åŒ–ç¨‹åºä¼šå°†æ¯ä¸ªåˆ—è¡¨é¡¹æ”¾åœ¨è‡ªå·±çš„ä¸€è¡Œä¸Šã€‚å½“ä½ è®¤ä¸ºä½ çš„åˆ—è¡¨å¯èƒ½åœ¨ä»¥åæœ‰æ›´å¤šçš„é¡¹ç›®æ—¶ï¼Œè¯·æ·»åŠ å°¾éšé€—å·ã€‚ä»…ä»…ä¸ºäº†æ ¼å¼åŒ–çš„å¥½å¤„è€Œæ·»åŠ å°¾éšé€—å·ã€‚

JavaScript ä»…æ”¯æŒåœ¨åˆ—è¡¨å’Œæ˜ å°„æ–‡å­—ä¸­ä½¿ç”¨å°¾éšé€—å·ã€‚

:::secondary æƒ³äº†è§£æ›´å¤šï¼š

- ä½¿ç”¨é€—å·ä½¿ä½ çš„ä»£ç æ›´åƒ HTMLï¼Œè¯·é˜…è¯» [ä½¿ç”¨å°¾éšé€—å·][] åœ¨ flutter.dev ä¸Šã€‚
- ä»£ç æ£€æŸ¥ Dartï¼Œè¯·é˜…è¯» [ä»£ç æ£€æŸ¥è§„åˆ™][]ã€‚
- ç¼–å†™è‰¯å¥½çš„ Dart ä»£ç ï¼Œè¯·é˜…è¯» [æœ‰æ•ˆçš„ Dart][]ã€‚
  :::

## å†…ç½®ç±»å‹

JavaScript å’Œ Dart éƒ½å°†å®ƒä»¬çš„æ•°æ®åˆ†ç±»ä¸º *ç±»å‹*ã€‚
æ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç±»å‹ã€‚
ç±»å‹ç¡®å®šå˜é‡å¯ä»¥å­˜å‚¨çš„å€¼çš„ç±»å‹ä»¥åŠå¯ä»¥å¯¹è¿™äº›å€¼æ‰§è¡Œçš„æ“ä½œã€‚
Dart ä¸ JavaScript ä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸ºæ¯ä¸ªè¡¨è¾¾å¼å’Œå˜é‡åˆ†é…äº†é™æ€ç±»å‹ã€‚
é™æ€ç±»å‹é¢„æµ‹äº†å˜é‡çš„å€¼æˆ–è¡¨è¾¾å¼çš„å€¼çš„è¿è¡Œæ—¶ç±»å‹ã€‚
è¿™æ„å‘³ç€ Dart åº”ç”¨ç¨‹åºå…·æœ‰é™æ€ç±»å‹çš„ç±»å‹å®‰å…¨æ€§ã€‚

JavaScript æä¾›äº†åŸå§‹ç±»å‹ `num`ã€`string` å’Œ `boolean`ï¼Œä»¥åŠ `null` å€¼ï¼Œä»¥åŠ *æ•°ç»„* å’Œ `Map` ç±»å‹ã€‚

Dart æ”¯æŒä»¥ä¸‹å†…ç½®ç±»å‹ï¼š

- æ•°å­—ï¼ˆ`num`ã€`int`ã€`double`ï¼‰
- å­—ç¬¦ä¸²ï¼ˆ`String`ï¼‰
- å¸ƒå°”å€¼ï¼ˆ`bool`ï¼‰
- åˆ—è¡¨ï¼ˆ`List`ï¼Œä¹Ÿç§°ä¸ºæ•°ç»„ï¼‰
- é›†åˆï¼ˆ`Set`ï¼‰
- æ˜ å°„ï¼ˆ`Map`ï¼‰
- ç¬¦å·ï¼ˆ`Symbol`ï¼‰
- å€¼ `null`ï¼ˆ`Null`ï¼‰

è¦äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹ [å†…ç½®ç±»å‹][] åœ¨ [Dart è¯­è¨€å¯¼è§ˆ][] ä¸­ã€‚

Dart ä¸­çš„æ‰€æœ‰é `Null` ç±»å‹éƒ½æ˜¯ Object çš„å­ç±»å‹ã€‚
æ‰€æœ‰å€¼ä¹Ÿéƒ½æ˜¯å¯¹è±¡ã€‚
Dart ä¸ä½¿ç”¨åƒ JavaScript é‚£æ ·çš„ "åŸå§‹ç±»å‹"ã€‚
ç›¸æ¯”ä¹‹ä¸‹ï¼ŒDart è§„èŒƒåŒ–æˆ– *è§„èŒƒåŒ–* äº†æ•°å­—ã€å¸ƒå°”å€¼å’Œ `null` å€¼ã€‚
è¿™æ„å‘³ç€åªå­˜åœ¨ä¸€ä¸ªå…·æœ‰æ•°å€¼ `1` çš„ `int` å€¼ã€‚

:::note
JavaScript æœ‰ä¸¤ä¸ªç›¸ç­‰è¿ç®—ç¬¦ï¼Œ`==` å’Œ `===`ã€‚
`==` è¿ç®—ç¬¦åœ¨å¯¹åŸå§‹å€¼è¿›è¡Œä»»ä½•å¿…è¦çš„ç±»å‹è½¬æ¢åæ‰§è¡Œç›¸ç­‰æ€§æµ‹è¯•ã€‚
`===` è¿ç®—ç¬¦ä¸æ‰§è¡Œç±»å‹è½¬æ¢ã€‚
Dart ä½¿ç”¨ `identical` å‡½æ•°æ¥æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦æ˜¯ç›¸åŒçš„å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ `==` è¿ç®—ç¬¦æ¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦è®¤ä¸ºå®ƒä»¬æ˜¯ç›¸ç­‰çš„ã€‚
:::

ä¾‹å¦‚ï¼š
ç›¸ç­‰è¿ç®—ç¬¦ `==` å’Œ `identical()` æ–¹æ³•å¯¹äºæ•°å­—ç±»å‹çš„ç›¸åŒå€¼è¿”å› `true`ã€‚è¯·æŸ¥çœ‹ä»¥ä¸‹ä»£ç ç¤ºä¾‹ä¸­çš„ç¤ºä¾‹ï¼š

```dart
var a = 2;
var b = 1 + 1;

print(a == b); // è¾“å‡º true
print(identical(a, b)); // è¾“å‡º trueï¼›åªå­˜åœ¨ä¸€ä¸ª "2" å¯¹è±¡
```

### åŸå§‹ç±»å‹

æœ¬èŠ‚ä»‹ç»äº† Dart å¦‚ä½•è¡¨ç¤º JavaScript ä¸­çš„åŸå§‹ç±»å‹ã€‚

#### æ•°å­—

Dart æœ‰ä¸‰ç§ç”¨äºä¿å­˜æ•°å­—çš„æ•°æ®ç±»å‹ï¼š

`num`
: ä¸ JavaScript ä¸­çš„é€šç”¨æ•°å­—ç±»å‹ç›¸å½“ã€‚

`int`
: æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å€¼ã€‚

`double`
: ä»»ä½• 64 ä½ï¼ˆåŒç²¾åº¦ï¼‰æµ®ç‚¹æ•°ã€‚

Dart API å°†æ‰€æœ‰è¿™äº›ç±»å‹éƒ½ä½œä¸ºç±»ã€‚
`int` å’Œ `double` ç±»å‹éƒ½å°† `num` ä½œä¸ºå®ƒä»¬çš„çˆ¶ç±»ï¼š

<img
src="/assets/img/guides/number-classes.png"
alt="num subclasses Object and int and double each subclass num">

ç”±äº Dart å°†æ•°å­—è§†ä¸ºå¯¹è±¡ï¼Œæ•°å­—å¯ä»¥å°†å®ƒä»¬è‡ªå·±çš„å®ç”¨å‡½æ•°ä½œä¸ºå¯¹è±¡æ–¹æ³•å…¬å¼€ã€‚
ä½ ä¸éœ€è¦ä½¿ç”¨é¢å¤–çš„å¯¹è±¡æ¥å°†å‡½æ•°åº”ç”¨äºæ•°å­—ã€‚

ä¾‹å¦‚ï¼Œè¦å°† `double` å››èˆäº”å…¥ä¸ºæ•´æ•°ï¼š

```js
let rounded = Math.round(2.5);
```

```dart
var rounded = 2.5.round();
```

#### å­—ç¬¦ä¸²

Dart ä¸­çš„å­—ç¬¦ä¸²ä¸ JavaScript ä¸­çš„å­—ç¬¦ä¸²ç±»ä¼¼ã€‚
è¦ç¼–å†™å­—ç¬¦ä¸²æ–‡å­—ï¼Œå°†å…¶æ‹¬åœ¨å•å¼•å·ï¼ˆ`'`ï¼‰æˆ–åŒå¼•å·ï¼ˆ`"`ï¼‰ä¸­ã€‚
å¤§å¤šæ•° Dart å¼€å‘äººå‘˜ä½¿ç”¨å•å¼•å·ï¼Œä½†è¯­è¨€å¹¶æ²¡æœ‰å¼ºåˆ¶è§„å®šã€‚
å¦‚æœä½ ä¸æƒ³åœ¨å­—ç¬¦ä¸²ä¸­è½¬ä¹‰å•å¼•å·ï¼Œå¯ä»¥ä½¿ç”¨åŒå¼•å·ã€‚

```dart
var a = 'This is a string.';
```

##### è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦

è¦åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«å…·æœ‰å…¶ä»–å«ä¹‰çš„å­—ç¬¦ï¼Œæ¯”å¦‚ç”¨äºå­—ç¬¦ä¸²æ’å€¼çš„ `$`ï¼Œå¿…é¡»è½¬ä¹‰è¯¥å­—ç¬¦ã€‚
Dart ä¸­çš„è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ä¸ JavaScript å’Œå¤§å¤šæ•°å…¶ä»–è¯­è¨€ç±»ä¼¼ã€‚
è¦è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œè¯·åœ¨è¯¥å­—ç¬¦å‰é¢åŠ ä¸Šåæ–œæ å­—ç¬¦ï¼ˆ`\`ï¼‰ã€‚

ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†ä¸€äº›ç¤ºä¾‹ã€‚

```dart
final singleQuotes = 'I\'m learning Dart'; // I'm learning Dart
final doubleQuotes = "Escaping the \" character"; // Escaping the " character
final dollarEscape = 'The price is \$3.14.'; // The price is $3.14.
final backslashEscape = 'The Dart string escape character is \\.';
final unicode = '\u{1F60E}'; // ğŸ˜,  Unicode scalar U+1F60E
```

:::note
ä½ å¯ä»¥ä½¿ç”¨å¸¦æœ‰æˆ–ä¸å¸¦æœ‰èŠ±æ‹¬å·çš„å››ä½åå…­è¿›åˆ¶å­—ç¬¦ã€‚
è¦äº†è§£æ›´å¤šå…³äºä½¿ç”¨ Unicode å­—ç¬¦çš„ä¿¡æ¯ï¼Œè¯·å‚é˜… [Runes and grapheme clusters][]ã€‚
:::

##### å­—ç¬¦ä¸²æ’å€¼

JavaScript æ”¯æŒæ¨¡æ¿æ–‡å­—ã€‚
è¿™äº›ä½¿ç”¨åå¼•å·ï¼ˆ`` ` ``ï¼‰å­—ç¬¦å®šç•Œï¼Œæœ‰ä»¥ä¸‹åŸå› ï¼š

- å…è®¸å¤šè¡Œå­—ç¬¦ä¸²
- åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥åµŒå…¥å¼è¡¨è¾¾å¼
- åˆ›å»ºç§°ä¸ºæ ‡è®°æ¨¡æ¿çš„ç‰¹æ®Šæ„é€ 

åœ¨ Dart ä¸­ï¼Œä½ ä¸éœ€è¦å°†å­—ç¬¦ä¸²æ‹¬åœ¨åå¼•å·ä¸­æ¥è¿æ¥å­—ç¬¦ä¸²æˆ–åœ¨å­—ç¬¦ä¸²æ–‡å­—ä¸­ä½¿ç”¨æ’å€¼ã€‚

è¦äº†è§£æ›´å¤šï¼Œè¯·æŸ¥çœ‹ [Strings][] åœ¨ Dart è¯­è¨€å¯¼è§ˆä¸­ã€‚

ä¸ JavaScript æ¨¡æ¿æ–‡å­—ä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ `${<expression>}` è¯­æ³•å°†è¡¨è¾¾å¼æ’å…¥å­—ç¬¦ä¸²æ–‡å­—ä¸­ã€‚
Dart ä½¿ç”¨æ­¤è¯­æ³•ï¼Œå¹¶å…è®¸ä½ åœ¨è¡¨è¾¾å¼ä½¿ç”¨å•ä¸ªæ ‡è¯†ç¬¦æ—¶çœç•¥èŠ±æ‹¬å·ã€‚

```dart
var food = 'bread';
var str = 'I eat $food'; // I eat bread
var str = 'I eat ${food}'; // I eat bread
```

#### å­—ç¬¦ä¸²è¿æ¥å’Œå¤šè¡Œå£°æ˜

åœ¨ JavaScript ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ–‡å­—æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ã€‚
Dart æœ‰ä¸¤ç§å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²çš„æ–¹å¼ã€‚

<ol>
<li> ä½¿ç”¨éšå¼å­—ç¬¦ä¸²è¿æ¥ï¼š
    Dart ä¼šè¿æ¥ä»»ä½•ç›¸é‚»çš„å­—ç¬¦ä¸²æ–‡å­—ï¼Œå³ä½¿å®ƒä»¬è·¨è¶Šå¤šè¡Œï¼š

```dart
final s1 = 'String '
    'concatenation'
    " even works over line breaks.";
```

</li>

<li> ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²æ–‡å­—ï¼š
å½“åœ¨å­—ç¬¦ä¸²çš„ä¸¤ä¾§ä½¿ç”¨ä¸‰ä¸ªå¼•å·ï¼ˆå•å¼•å·æˆ–åŒå¼•å·ï¼‰æ—¶ï¼Œè¯¥æ–‡å­—å¯ä»¥è·¨è¶Šå¤šè¡Œã€‚

```dart
final s2 = '''
You can create
multiline strings like this one.
''';

final s3 = """
This is also a
multiline string.""";
```

</li>
</ol>

#### ç›¸ç­‰æ€§

Dart è®¤ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«ç›¸åŒçš„ä»£ç å•å…ƒåºåˆ—æ—¶å®ƒä»¬æ˜¯ç›¸ç­‰çš„ã€‚è¦ç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦å…·æœ‰ç›¸åŒçš„åºåˆ—ï¼Œè¯·ä½¿ç”¨ç­‰äºè¿ç®—ç¬¦ï¼ˆ`==`ï¼‰ã€‚

```dart
final s1 = 'String '
    'concatenation'
    " works even over line breaks.";
assert(s1 ==
    'String concatenation works even over '
        'line breaks.');
```

#### å¸ƒå°”å€¼

Dart å’Œ JavaScript ä¸­çš„å¸ƒå°”å€¼è¡¨ç¤ºäºŒè¿›åˆ¶æ¡ä»¶ã€‚
è¿™ä¸¤ä¸ªå€¼è¡¨ç¤ºä¸€ä¸ªå€¼æˆ–è¡¨è¾¾å¼æ˜¯å¦ä¸º `true` æˆ– `false`ã€‚
ä½ å¯ä»¥ä½¿ç”¨å­—é¢é‡ `true` å’Œ `false` è¿”å›è¿™äº›å€¼ï¼Œæˆ–è€…ä½¿ç”¨è¡¨è¾¾å¼å¦‚ `x < 5` æˆ– `y == null` ç”Ÿæˆå®ƒä»¬ã€‚

```js
let isBananaPeeled = false;
```

```dart
var isBananaPeeled = false;
```

## å˜é‡

Dart ä¸­çš„å˜é‡ä¸ JavaScript ä¸­çš„å˜é‡ç±»ä¼¼ï¼Œä½†æœ‰ä¸¤ä¸ªä¾‹å¤–ï¼š

1. æ¯ä¸ªå˜é‡éƒ½æœ‰ä¸€ä¸ªç±»å‹ã€‚
2. Dart å°†æ‰€æœ‰å˜é‡ä½œç”¨åŸŸé™åˆ¶åœ¨å—çº§ï¼Œå°±åƒ JavaScript ä¸­çš„ `let` å’Œ `const` å˜é‡ä¸€æ ·ã€‚

Dart å˜é‡æœ‰ä¸¤ç§æ–¹å¼è·å¾—ç±»å‹ï¼š

1. å£°æ˜ï¼šåœ¨å£°æ˜ä¸­å†™å…¥ç±»å‹ã€‚
2. æ¨æ–­ï¼šç”¨äºåˆå§‹åŒ–å˜é‡çš„è¡¨è¾¾å¼ã€‚æŒ‰ç…§ [çº¦å®š][omit_local_variable_types]ï¼Œå½“åˆ†æå™¨å¯ä»¥æ¨æ–­ç±»å‹æ—¶ï¼Œè¯·ä½¿ç”¨ `var` æˆ– `final`ã€‚

```js
// å£°æ˜å¹¶ç«‹å³åˆå§‹åŒ–å˜é‡
let name = "bob";
```

```dart
// åœ¨ä¸æä¾›åˆå§‹å€¼æ—¶å£°æ˜å…·ä½“ç±»å‹çš„å˜é‡
String name;
// åŒæ—¶å£°æ˜å’Œåˆå§‹åŒ–å˜é‡ï¼ŒDart æ¨æ–­ç±»å‹
var name = 'bob';
```

å˜é‡åªèƒ½æ¥å—å…¶ç±»å‹çš„å€¼ã€‚

```dart
var name = 'bob';
name = 5; // ç¦æ­¢ï¼Œå› ä¸º `name` çš„ç±»å‹æ˜¯ `String`ã€‚
```

ä¸ JavaScript å˜é‡ä¸€æ ·ï¼Œä½ å¯ä»¥å°†ä»»ä½•å€¼èµ‹ç»™ä½¿ç”¨ `dynamic` ç±»å‹çš„ Dart å˜é‡ã€‚

```js
// å£°æ˜ä¸€ä¸ªå˜é‡
let name;
// åˆå§‹åŒ–å˜é‡
name = "bob";
```

```dart
// å£°æ˜ä¸€ä¸ªæ²¡æœ‰ç±»å‹æˆ–èµ‹å€¼çš„å˜é‡ï¼ŒDart æ¨æ–­ä¸º 'dynamic' ç±»å‹
var name;
// åˆå§‹åŒ–å˜é‡ï¼Œç±»å‹ä»ç„¶æ˜¯ `dynamic`
name = 'bob';
name = 5; // å…è®¸ï¼Œå› ä¸º `name` çš„ç±»å‹æ˜¯ `dynamic`ã€‚
```

### Final å’Œ const

JavaScript å’Œ Dart éƒ½ä½¿ç”¨å˜é‡ä¿®é¥°ç¬¦ã€‚ä¸¤è€…éƒ½ä½¿ç”¨ `const`ï¼Œä½† `const` çš„å·¥ä½œæ–¹å¼ä¸åŒã€‚JavaScript ä½¿ç”¨ `const`ï¼Œä½† Dart ä½¿ç”¨ `final`ã€‚

å½“ä½ å°† `final` æ·»åŠ åˆ° Dart å˜é‡æˆ– `const` æ·»åŠ åˆ° JavaScript å˜é‡æ—¶ï¼Œå¿…é¡»åœ¨å…¶ä»–ä»£ç è¯»å–å…¶å€¼ä¹‹å‰åˆå§‹åŒ–å˜é‡ã€‚åˆå§‹åŒ–åï¼Œä½ æ— æ³•æ›´æ”¹è¿™äº›å˜é‡çš„å¼•ç”¨ã€‚

å½“ Dart ä½¿ç”¨ `const` æ—¶ï¼Œå®ƒæŒ‡çš„æ˜¯ç¼–è¯‘æ—¶åˆ›å»ºçš„ç‰¹æ®Šå€¼ã€‚Dart ä½¿ç”¨æœ‰é™çš„è¡¨è¾¾å¼æ¥åˆ›å»ºè¿™äº›ä¸å¯å˜å€¼ã€‚è¿™äº›è¡¨è¾¾å¼ *ä¸èƒ½* äº§ç”Ÿå‰¯ä½œç”¨ã€‚åœ¨è¿™äº›æ¡ä»¶ä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥é¢„æµ‹å¸¸é‡å˜é‡æˆ–è¡¨è¾¾å¼çš„ç¡®åˆ‡å€¼ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒçš„é™æ€ç±»å‹ã€‚

```dart
final String name;
// ä¸èƒ½åœ¨æ­¤å¤„è¯»å– nameï¼Œå› ä¸ºå®ƒæ²¡æœ‰åˆå§‹åŒ–ã€‚
if (useNickname) {
  name = "Bob";
} else {
  name = "Robert";
}
print(name); // åœ¨æ­¤å¤„æ­£ç¡®åˆå§‹åŒ–ã€‚
```

:::note
å½“ä½ åˆ›å»ºå¯¹è±¡æ—¶ï¼Œç±»æ„é€ å‡½æ•°å¿…é¡»åˆå§‹åŒ– `final` å®ä¾‹å˜é‡ã€‚è¿™ç¡®ä¿åœ¨ä»»ä½•äººè¯»å–å®ƒä»¬ä¹‹å‰ï¼Œè¿™äº›å˜é‡éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚

åœ¨ [ç±»](#classes) éƒ¨åˆ†äº†è§£æ›´å¤šã€‚
:::

åœ¨ Dart ä¸­ï¼Œ*å¸¸é‡å˜é‡å¿…é¡»åŒ…å«å¸¸é‡å€¼*ã€‚éå¸¸é‡å˜é‡å¯ä»¥åŒ…å«å¸¸é‡å€¼ï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶æ ‡è®°ä¸º `const`ã€‚

```dart
var foo = const [];
  // foo ä¸æ˜¯å¸¸é‡ï¼Œä½†å®ƒæŒ‡å‘çš„å€¼æ˜¯å¸¸é‡ã€‚
  // ä½ å¯ä»¥é‡æ–°åˆ†é… foo ä¸ºä¸åŒçš„åˆ—è¡¨å€¼ï¼Œ
  // ä½†å®ƒå½“å‰çš„åˆ—è¡¨å€¼ä¸èƒ½è¢«æ›´æ”¹ã€‚

const baz = []; // ç­‰åŒäº `const []`
```

åŒæ ·ï¼Œç±»å¯ä»¥æœ‰è‡ªå·±çš„ `const` æ„é€ å‡½æ•°ï¼Œäº§ç”Ÿä¸å¯å˜å®ä¾‹ã€‚

ä½ ä¸èƒ½ä¿®æ”¹ JavaScript æˆ– Dart ä¸­çš„ `const` å˜é‡ã€‚JavaScript å…è®¸ä½ ä¿®æ”¹ `const` å¯¹è±¡çš„å­—æ®µï¼Œä½† Dart ä¸å…è®¸ã€‚

è¦äº†è§£æ›´å¤šï¼Œè¯·å‚è§ [ç±»](#classes) éƒ¨åˆ†ã€‚

## ç©ºå®‰å…¨

ä¸ JavaScript ä¸åŒï¼ŒDart æ”¯æŒç©ºå®‰å…¨ã€‚
åœ¨ Dart ä¸­ï¼Œæ‰€æœ‰ç±»å‹é»˜è®¤ä¸ºéç©ºå®‰å…¨ã€‚
è¿™å¯¹ Dart å¼€å‘äººå‘˜æœ‰åˆ©ï¼Œå› ä¸º Dart åœ¨ç¼–å†™ä»£ç æ—¶æ•è·ç©ºå¼•ç”¨å¼‚å¸¸ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚

### å¯ç©º vs éç©ºç±»å‹

ä»¥ä¸‹ä»£ç ç¤ºä¾‹ä¸­çš„å˜é‡éƒ½ä¸èƒ½ä¸º `null`ã€‚

```dart
// åœ¨ç©ºå®‰å…¨çš„ Dart ä¸­ï¼Œè¿™äº›å˜é‡æ°¸è¿œä¸èƒ½ä¸º nullã€‚
var i = 42; // æ¨æ–­ä¸º intã€‚
String name = getFileName();
final b = Foo(); // Foo() è°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°
```

è¦è¡¨ç¤ºä¸€ä¸ªå˜é‡å¯èƒ½å…·æœ‰å€¼ `null`ï¼Œè¯·åœ¨å…¶ç±»å‹å£°æ˜ä¸­æ·»åŠ  `?`ï¼š

```dart
int? aNullableInt = null;
```

å¯¹äºä»»ä½•å…¶ä»–ç±»å‹å£°æ˜ï¼Œå¦‚å‡½æ•°å£°æ˜ï¼š

```dart
String? returnsNullable() {
  return random.nextDouble() < 0.5
    ? 'Sometimes null!'
    : null;
}

String returnsNonNullable() {
  return 'Never null!';
}
```

### ç©ºå®‰å…¨è¿ç®—ç¬¦

Dart æ”¯æŒå‡ ç§è¿ç®—ç¬¦æ¥å¤„ç†ç©ºå®‰å…¨æ€§ã€‚
ä¸ JavaScript ä¸€æ ·ï¼ŒDart æ”¯æŒç©ºèµ‹å€¼è¿ç®—ç¬¦ï¼ˆ`??=`ï¼‰ã€ç©ºåˆå¹¶è¿ç®—ç¬¦ï¼ˆ`??`ï¼‰å’Œå¯é€‰é“¾è¿ç®—ç¬¦ï¼ˆ`?.`ï¼‰ã€‚è¿™äº›è¿ç®—ç¬¦çš„å·¥ä½œæ–¹å¼ä¸ JavaScript ç›¸åŒã€‚

#### ! è¿ç®—ç¬¦

åœ¨å¯ç©ºå˜é‡æˆ–è¡¨è¾¾å¼å¯èƒ½ä¸ºéç©ºæ—¶ï¼Œä½ å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨æŠ‘åˆ¶ä»»ä½•ç¼–è¯‘æ—¶é”™è¯¯ï¼Œä½¿ç”¨ (`!`) è¿ç®—ç¬¦åœ¨è¡¨è¾¾å¼åé¢æ”¾ç½®è¯¥è¿ç®—ç¬¦ã€‚ä¸è¦å°†å…¶ä¸ Dart çš„éï¼ˆ`!`ï¼‰è¿ç®—ç¬¦æ··æ·†ï¼Œåè€…ä½¿ç”¨ç›¸åŒçš„ç¬¦å·ä½†æ”¾åœ¨è¡¨è¾¾å¼å‰é¢ã€‚

```dart
int? a = 5;

int b = a; // ä¸å…è®¸ã€‚
int b = a!; // å…è®¸ã€‚


[Customizing static analysis]: /tools/analysis
[`dart fix`]: /tools/dart-fix
[Effective Dart]: /effective-dart
[Linter rules]: /tools/linter-rules
[Prettier]: https://prettier.io/
[Using trailing commas]: {{site.flutter-docs}}/development/tools/formatting#using-trailing-commas
[Built-in types]: /language/built-in-types
[Dart Language Tour]: /guides/language
[Runes and grapheme clusters]: /language/built-in-types#runes-and-grapheme-clusters
[Strings]: /language/built-in-types#strings
[omit_local_variable_types]: /effective-dart/design#dont-redundantly-type-annotate-initialized-local-variables


### ä¸€æµå‡½æ•°

JavaScript å’Œ Dart å°†å‡½æ•°è§†ä¸ºä¸€æµå…¬æ°‘ã€‚
è¿™æ„å‘³ç€ Dart å°†å‡½æ•°è§†ä¸ºä»»ä½•å…¶ä»–å¯¹è±¡ã€‚
ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†å¦‚ä½•å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼š

```dart
void printElement(int element) {
  print(element);
}

var list = [1, 2, 3];

// å°† printElement ä½œä¸ºå‚æ•°ä¼ é€’ã€‚
list.forEach(printElement);
```

### åŒ¿åå‡½æ•°

JavaScript å’Œ Dart éƒ½æ”¯æŒ[*åŒ¿å*å‡½æ•°][_anonymous_ functions]ï¼Œå³æ²¡æœ‰åç§°çš„å‡½æ•°ã€‚ä¸å‘½åå‡½æ•°ä¸€æ ·ï¼Œæ‚¨å¯ä»¥åƒä»»ä½•å…¶ä»–å€¼ä¸€æ ·ä¼ é€’åŒ¿åå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå°†åŒ¿åå‡½æ•°å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œå°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä»å¦ä¸€ä¸ªå‡½æ•°è¿”å›ã€‚

JavaScript æœ‰ä¸¤ç§å£°æ˜åŒ¿åå‡½æ•°çš„æ–¹å¼ï¼š

1. ä½¿ç”¨æ ‡å‡†å‡½æ•°è¡¨è¾¾å¼
2. ä½¿ç”¨ç®­å¤´è¯­æ³•

åŒæ ·ï¼ŒDart ä¹Ÿæœ‰ä¸¤ç§å£°æ˜åŒ¿åå‡½æ•°çš„æ–¹å¼ã€‚ä¸¤è€…çš„å·¥ä½œæ–¹å¼ä¸ JavaScript çš„ç®­å¤´è¡¨è¾¾å¼ç±»ä¼¼ã€‚Dart çš„åŒ¿åå‡½æ•°ä¸æ”¯æŒå¸¸è§„å‡½æ•°è¡¨è¾¾å¼çš„é™„åŠ åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒJavaScript æ”¯æŒå‡½æ•°è¡¨è¾¾å¼å……å½“æ„é€ å‡½æ•°ï¼Œæˆ–è€…åˆ›å»ºå¯¹ `this` çš„è‡ªå®šä¹‰ç»‘å®šã€‚

è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [ç±»](#classes) éƒ¨åˆ†ã€‚

```js
// ä¸€ä¸ªåˆ†é…ç»™å˜é‡çš„å¸¸è§„å‡½æ•°è¡¨è¾¾å¼
let funcExpr = function(a, b) {
  return a * b;
}
// ä½œä¸ºç®­å¤´å‡½æ•°è¡¨è¾¾çš„ç›¸åŒåŒ¿åå‡½æ•°
let arrowFuncExpr = (a, b) => {
  return a * b;
}
// ä»…æœ‰ä¸€ä¸ªè¿”å›è¯­å¥çš„ç®­å¤´å‡½æ•°
// ä½œä¸ºå…¶å†…å®¹ä¸éœ€è¦å—ã€‚
let arrowFuncExpr2 = (a, b) => a * b;
```

```dart
// å°†åŒ¿åå‡½æ•°åˆ†é…ç»™å˜é‡ã€‚
var blockFunc =
  optionalCallback ?? (int a, int b) {
    return a * b;
};

// å¯¹äºä»…æœ‰ä¸€ä¸ªè¿”å›è¯­å¥çš„è¡¨è¾¾å¼ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´è¯­æ³•ï¼š
var singleFunc = (int a, int b) => a * b;
```

ä¸ JavaScript ä¸€æ ·ï¼Œæ‚¨å¯ä»¥å°†åŒ¿åå‡½æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ã€‚åœ¨ä½¿ç”¨æ•°ç»„å’Œåˆ—è¡¨çš„ `map` å‡½æ•°æ—¶ï¼Œå¼€å‘äººå‘˜ç»å¸¸ä¼ é€’åŒ¿åå‡½æ•°ï¼š

```js
// è¿”å› [4, 5, 6]
[1, 2, 3].map(e => e + 3);

// è¿”å› [5, 7, 9]
[1, 2, 3].map(e => {
  e *= 2;
  return e + 3;
});
```

```dart
// è¿”å› [4, 5, 6]
[1, 2, 3].map((e) => e + 3).toList();

// è¿”å› [5, 7, 9]
var list2 = [1, 2, 3].map((e) {
  e *= 2;
  return e + 3;
}).toList();
```

:::note
å‰é¢ç¤ºä¾‹ä¸­çš„ `map` å‡½æ•°è¿”å›ä¸€ä¸ª `Iterable<T>`ï¼Œè€Œä¸æ˜¯ `List<T>`ã€‚
`toList` å‡½æ•°å°†è¿”å›çš„ `Iterable` è½¬æ¢å› `List`ã€‚

ä½¿ç”¨åˆ—è¡¨æ–‡å­—ä¹Ÿå¯ä»¥å®ç°ç›¸åŒçš„ç›®æ ‡ã€‚

```dart
// è¿™ä¸¤ä¸ªè¯­å¥æ˜¯ç­‰ä»·çš„ï¼š
print([for (var e in [1, 2, 3]) e + 3]);
print([1, 2, 3].map((e) => e + 3).toList());
```

:::

### ç”Ÿæˆå™¨å‡½æ•°

è¿™ä¸¤ç§è¯­è¨€éƒ½æ”¯æŒ[*ç”Ÿæˆå™¨å‡½æ•°*][_generator functions]ã€‚è¿™äº›å‡½æ•°è¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„é¡¹ç›®é›†åˆï¼Œä»¥é¿å…ä¸å¿…è¦çš„å·¥ä½œã€‚

è¦åœ¨ Dart ä¸­ç¼–å†™ç”Ÿæˆå™¨å‡½æ•°ï¼Œè¯·åœ¨å‡½æ•°å‚æ•°åæ·»åŠ  `sync*` å…³é”®å­—ï¼Œå¹¶è¿”å›ä¸€ä¸ª `Iterable`ã€‚ä½¿ç”¨ `yield` å…³é”®å­—å‘æœ€ç»ˆå¯è¿­ä»£å¯¹è±¡æ·»åŠ é¡¹ç›®ï¼Œæˆ–ä½¿ç”¨ `yield*` æ·»åŠ æ•´å¥—é¡¹ç›®ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•ç¼–å†™åŸºæœ¬çš„ç”Ÿæˆå™¨å‡½æ•°ï¼š

```js
function* naturalsTo(n) {
  let k = 0;
  while (k < n) {
    yield k++;
  }
}

// è¿”å› [0, 1, 2, 3, 4]
for (let value of naturalsTo(5)) {
  console.log(value);
}
```

```dart
Iterable<int> naturalsTo(int n) sync* {
  int k = 0;
  while (k < n) {
    yield k++;
  }
}

// è¿”å›åŒ…å« [0, 1, 2, 3, 4] çš„å¯è¿­ä»£å¯¹è±¡
print(naturalsTo(5).toList());
```

```js
function* doubleNaturalsTo(n) {
  let k = 0;
  while (k < n) {
    yield* [k, k];
    k++;
  }
}

// è¿”å› [0, 0, 1, 1, 2, 2]
for (let value of doubleNaturalsTo(3)) {
  console.log(value);
}
```

```dart
Iterable<int> doubleNaturalsTo(int n) sync* {
  int k = 0;
  while (k < n) {
    yield* [k, k];
    k++;
  }
}

// è¿”å›åŒ…å« [0, 0, 1, 1, 2, 2] çš„å¯è¿­ä»£å¯¹è±¡
print(doubleNaturalsTo(3));
```

æ‚¨è¿˜å¯ä»¥å®šä¹‰å¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°ï¼Œå®ƒè¿”å›æµè€Œä¸æ˜¯å¯è¿­ä»£å¯¹è±¡ã€‚åœ¨å³å°†åˆ°æ¥çš„ [å¼‚æ­¥æ€§](#asynchrony) éƒ¨åˆ†ä¸­äº†è§£æ›´å¤šã€‚

## è¯­å¥

æœ¬èŠ‚æè¿°äº† JavaScript å’Œ Dart ä¹‹é—´è¯­å¥çš„å·®å¼‚ã€‚

### æ§åˆ¶æµï¼ˆif/elseã€forã€whileã€switchï¼‰

å¤§å¤šæ•°æ§åˆ¶è¯­å¥çš„å·¥ä½œæ–¹å¼ä¸å®ƒä»¬åœ¨ JavaScript ä¸­çš„å¯¹åº”è¯­å¥ç›¸ä¼¼ã€‚ä¸€äº›è¿˜æœ‰é¢å¤–çš„ç”¨é€”ï¼Œé€‚ç”¨äº [é›†åˆ](#collections)ã€‚

#### è¿­ä»£

è™½ç„¶ JavaScript å’Œ Dart éƒ½æœ‰ `for-in` å¾ªç¯ï¼Œä½†å®ƒä»¬çš„è¡Œä¸ºæœ‰æ‰€ä¸åŒã€‚

JavaScript çš„ `for-in` å¾ªç¯éå†å¯¹è±¡çš„å±æ€§ã€‚è¦éå† JavaScript å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ ï¼Œå¿…é¡»ä½¿ç”¨ `for-of` æˆ– `Array.forEach()`ã€‚Dart çš„ `for-in` å¾ªç¯ä¸ JavaScript çš„ `for-of` ç›¸ä¼¼ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†éå†é›†åˆå¹¶æ‰“å°æ¯ä¸ªå…ƒç´ ï¼š

```js
for (const element of list) {
  console.log(element);
}
```

```dart
for (final element in list) {
  print(element);
}
```

#### Switch

:::note
JavaScript å’Œ Dart ä¸­ `switch` è¯­å¥çš„ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼šå½“ä¸€ä¸ª case æ²¡æœ‰ `break`ã€`continue` æˆ– `return` è¯­å¥æ—¶ï¼ŒJavaScript å…è®¸æ‰§è¡Œæµç©¿è¿‡å¹¶ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªè¯­å¥ã€‚ç„¶è€Œï¼ŒDart åªæœ‰åœ¨ case çš„ä¸»ä½“ä¸ºç©ºæ—¶æ‰å…è®¸è¿™æ ·åšã€‚
:::

åœ¨ `switch` è¯­å¥ä¸­ä½¿ç”¨ `continue` æ—¶ï¼Œå¯ä»¥å°†å…¶ä¸æ”¾åœ¨ case ä¸Šçš„æ ‡ç­¾ç»“åˆä½¿ç”¨ï¼š

```dart
switch (testEnum) {
  case TestEnum.A:
    print('A');
    continue b;
  b:
  case TestEnum.B:
    print('B');
    break;
}
```

### è¿ç®—ç¬¦

Dart å’Œ JavaScript éƒ½åŒ…å«é¢„å®šä¹‰è¿ç®—ç¬¦ã€‚ä¸¤ç§è¯­è¨€éƒ½ä¸æ”¯æŒæ·»åŠ æ–°è¿ç®—ç¬¦ã€‚Dart ä½¿ç”¨ `operator` å…³é”®å­—é‡è½½ä¸€äº›ç°æœ‰è¿ç®—ç¬¦ã€‚ä¾‹å¦‚ï¼š

```dart
class Vector {
  final double x;
  final double y;
  final double z;
  Vector(this.x, this.y, this.z);
  Vector operator +(Vector other) => Vector(
    x + other.x, 
    y + other.y,
    z + other.z,
  );
  Vector operator *(double scalar) => Vector(
    x * scalar,
    y * scalar,
    z * scalar,
  );
}
```

#### ç®—æœ¯è¿ç®—ç¬¦

ä¸¤ç§è¯­è¨€çš„ç›¸ç­‰å’Œå…³ç³»è¿ç®—ç¬¦å‡ ä¹ç›¸åŒï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

| å«ä¹‰                                           | JavaScript è¿ç®—ç¬¦ | Dart è¿ç®—ç¬¦ |
| --------------------------------------------- | ----------------- | ----------- |
| åŠ æ³•                                           | `+`               | `+`         |
| å‡æ³•                                           | `-`               | `-`         |
| ä¸€å…ƒå‡ï¼Œä¹Ÿç§°ä¸ºå¦å®š                           | `-expr`           | `-expr`     |
| ä¹˜æ³•                                           | `*`               | `*`         |
| é™¤æ³•                                           | `/`               | `/`         |
| è¿”å›æ•´æ•°ç»“æœçš„é™¤æ³•                             |                   | `~/`        |
| æ•´æ•°é™¤æ³•çš„ä½™æ•°ï¼ˆæ¨¡ï¼‰                           | `%`               | `%`         |
| `x = x + 1`ï¼ˆè¡¨è¾¾å¼å€¼ä¸º `x + 1`ï¼‰              | `++x`             | `++x`       |
| `x = x + 1`ï¼ˆè¡¨è¾¾å¼å€¼ä¸º `x`ï¼‰                  | `x++`             | `x++`       |
| `x = x - 1`ï¼ˆè¡¨è¾¾å¼å€¼ä¸º `x - 1`ï¼‰              | `--x`             | `--x`       |
| `x = x - 1`ï¼ˆè¡¨è¾¾å¼å€¼ä¸º `x`ï¼‰                  | `x--`             | `x--`       |

{:.table .table-striped}

ä¾‹å¦‚ï¼š

```dart
assert(2 + 3 == 5);
assert(2 - 3 == -1);
assert(2 * 3 == 6);
assert(5 / 2 == 2.5); // ç»“æœæ˜¯ double
assert(5 ~/ 2 == 2); // ç»“æœæ˜¯ int
assert(5 % 2 == 1); // ä½™æ•°

a = 0;
b = ++a; // åœ¨ b è·å–å…¶å€¼ä¹‹å‰å¢åŠ  aã€‚
assert(a == b); // 1 == 1

a = 0;
b = a++; // åœ¨ b è·å–å…¶å€¼ä¹‹åå¢åŠ  aã€‚
assert(a != b); // 1 != 0

a = 0;
b = --a; // åœ¨ b è·å–å…¶å€¼ä¹‹å‰å‡å°‘ aã€‚
assert(a == b); // -1 == -1

a = 0;
b = a--; // åœ¨ b è·å–å…¶å€¼ä¹‹åå‡å°‘ aã€‚
assert(a != b); // -1 != 0
```

æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ° Dart è¿˜åŒ…å«ä¸€ä¸ª `~/` è¿ç®—ç¬¦ï¼ˆç§°ä¸º *æˆªæ–­é™¤æ³•è¿ç®—ç¬¦*ï¼‰ï¼Œå®ƒå°†ä¸€ä¸ª double è¿›è¡Œé™¤æ³•å¹¶è¾“å‡ºä¸€ä¸ªå‘ä¸‹å–æ•´çš„æ•´æ•°ï¼š

```dart
assert(25 == 50.4 ~/ 2);
assert(25 == 50.6 ~/ 2);
assert(25 == 51.6 ~/ 2);
```

#### ç›¸ç­‰å’Œå…³ç³»è¿ç®—ç¬¦

ä¸¤ç§è¯­è¨€çš„ç›¸ç­‰å’Œå…³ç³»è¿ç®—ç¬¦çš„å·¥ä½œæ–¹å¼ç›¸åŒï¼š

| å«ä¹‰                  | JavaScript è¿ç®—ç¬¦ | Dart è¿ç®—ç¬¦ |
| --------------------- | ----------------- | ----------- |
| ä¸¥æ ¼ç›¸ç­‰              | `===`             | `==`        |
| æŠ½è±¡ç›¸ç­‰              | `==`              |             |
| ä¸¥æ ¼ä¸ç›¸ç­‰            | `!==`             | `!=`        |
| æŠ½è±¡ä¸ç›¸ç­‰            | `!=`              |             |
| å¤§äº                  | `>`               | `>`         |
| å°äº                  | `<`               | `<`         |
| å¤§äºæˆ–ç­‰äº            | `>=`              | `>=`        |
| å°äºæˆ–ç­‰äº            | `<=`              | `<=`        |

{:.table .table-striped}

JavaScript çš„ `==` å’Œ `!=` è¿ç®—ç¬¦æ²¡æœ‰ç­‰ä»·ç‰©ã€‚

ä¾‹å¦‚ï¼š

```dart
assert(2 == 2);
assert(2 != 3);
assert(3 > 2);
assert(2 < 3);
assert(3 >= 3);
assert(2 <= 3);
```

#### ç±»å‹æµ‹è¯•è¿ç®—ç¬¦

è¿™ä¸¤ç§è¯­è¨€ä¹‹é—´çš„æµ‹è¯•è¿ç®—ç¬¦çš„å®ç°æœ‰äº›ä¸åŒï¼š

| å«ä¹‰                             | JavaScript è¿ç®—ç¬¦ | Dart è¿ç®—ç¬¦ |
| -------------------------------- | ----------------- | ----------- |
| ç±»å‹è½¬æ¢                         |                   | `x as T`    |
| å¦‚æœå¯¹è±¡å…·æœ‰æŒ‡å®šç±»å‹åˆ™ä¸ºçœŸ       | `x instanceof T`  | `x is T`    |
| å¦‚æœå¯¹è±¡ç¼ºå°‘æŒ‡å®šç±»å‹åˆ™ä¸ºçœŸ       | `!(x instanceof T)` | `x is! T`   |

{:.table .table-striped}

`obj is T` çš„ç»“æœä¸º trueï¼Œå¦‚æœ `obj` å®ç°äº† `T` æŒ‡å®šçš„æ¥å£ã€‚ä¾‹å¦‚ï¼Œ`obj is Object?` æ€»æ˜¯ä¸º trueã€‚

ä½¿ç”¨ç±»å‹è½¬æ¢è¿ç®—ç¬¦ (`as`) æ¥ç¡®ä¿å€¼å…·æœ‰ç‰¹å®šç±»å‹ã€‚å¦‚æœæ‚¨*çŸ¥é“*å¯¹è±¡å°†å…·æœ‰è¯¥ç±»å‹ï¼Œç¼–è¯‘å™¨å¯ä»¥ä½¿ç”¨å®ƒã€‚

ä¾‹å¦‚ï¼š

```dart
(person as Employee).employeeNumber = 4204583;
```

å¦‚æœæ‚¨ä¸*çŸ¥é“*å¯¹è±¡çš„ç±»å‹æ˜¯ `T`ï¼Œåˆ™åœ¨ä½¿ç”¨å¯¹è±¡ä¹‹å‰ä½¿ç”¨ `is T` æ¥æ£€æŸ¥ç±»å‹ã€‚

åœ¨ Dart ä¸­ï¼Œå±€éƒ¨å˜é‡çš„ç±»å‹åœ¨ if è¯­å¥çš„ä½œç”¨åŸŸå†…æ›´æ–°ã€‚å¯¹äºå®ä¾‹å˜é‡ï¼Œæƒ…å†µå¹¶éå¦‚æ­¤ã€‚

```dart
if (person is Employee) {
   person.employeeNumber = 4204583;
}
```

#### é€»è¾‘è¿ç®—ç¬¦

æ‚¨å¯ä»¥ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦æ¥åè½¬æˆ–ç»„åˆå¸ƒå°”è¡¨è¾¾å¼ã€‚ä¸¤ç§è¯­è¨€çš„é€»è¾‘è¿ç®—ç¬¦æ˜¯ç›¸åŒçš„ã€‚

| å«ä¹‰                                                        | JavaScript è¿ç®—ç¬¦ | Dart è¿ç®—ç¬¦ |
| ---------------------------------------------------------- | ----------------- | ----------- |
| åè½¬ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆå°† false æ›´æ”¹ä¸º trueï¼Œåä¹‹äº¦ç„¶ï¼‰        | `!x`              | `!x`        |
| é€»è¾‘æˆ–                                                      | `\|\|`            | `\|\|`      |
| é€»è¾‘ä¸                                                      | `&&`              | `&&`        |

{:.table .table-striped}

JavaScript å…è®¸åœ¨éœ€è¦å¸ƒå°”å€¼çš„åœ°æ–¹ä½¿ç”¨ä»»ä½•å€¼ã€‚ç„¶åå°†è¿™äº›å€¼è½¬æ¢ä¸º `true` æˆ– `false`ã€‚JavaScript å°†ç©ºå­—ç¬¦ä¸²å’Œæ•°å­— `0` è§†ä¸ºâ€œå‡â€å€¼ã€‚Dart å…è®¸åœ¨æ¡ä»¶ä¸­ä½¿ç”¨ `bool` å€¼å’Œé€»è¾‘è¿ç®—ç¬¦çš„æ“ä½œæ•°ã€‚

ä¾‹å¦‚ï¼š

```dart
if (!done && (col == 0 || col == 3)) {
  // ...Do something...
}
```

#### ä½è¿ç®—å’Œç§»ä½è¿ç®—ç¬¦

æ‚¨å¯ä»¥ä½¿ç”¨æ•´æ•°çš„ä½è¿ç®—å’Œç§»ä½è¿ç®—ç¬¦æ¥æ“ä½œæ•°å­—çš„å„ä¸ªä½ã€‚ä¸¤ç§è¯­è¨€çš„è¿ç®—ç¬¦å‡ ä¹ç›¸åŒï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

| å«ä¹‰                                               | JavaScript è¿ç®—ç¬¦ | Dart è¿ç®—ç¬¦ |
| ------------------------------------------------- | ----------------- | ----------- |
| æŒ‰ä½ä¸                                             | `&`               | `&`         |
| æŒ‰ä½æˆ–                                             | `\|`              | `\|`        |
| æŒ‰ä½å¼‚æˆ–                                           | `^`               | `^`         |
| ä¸€å…ƒæŒ‰ä½å–åï¼ˆ0 å˜ä¸º 1ï¼Œ1 å˜ä¸º 0ï¼‰               | `~expr`           | `~expr`     |
| å·¦ç§»                                               | `<<`              | `<<`        |
| å³ç§»                                               | `>>`              | `>>`        |
| æ— ç¬¦å·å³ç§»                                         | `>>>`             | `>>>`       |

{:.table .table-striped}

ä¾‹å¦‚ï¼š

```dart
final value = 0x22;
final bitmask = 0x0f;

assert((value & bitmask) == 0x02); // AND
assert((value & ~bitmask) == 0x20); // AND NOT
assert((value | bitmask) == 0x2f); // OR
assert((value ^ bitmask) == 0x2d); // XOR
assert((value << 4) == 0x220); // å·¦ç§»
assert((value >> 4) == 0x02); // å³ç§»
assert((-value >> 4) == -0x03); // å³ç§»
assert((value >>> 4) == 0x02); // æ— ç¬¦å·å³ç§»
assert((-value >>> 4) > 0); // æ— ç¬¦å·å³ç§»
```

#### æ¡ä»¶è¿ç®—ç¬¦

Dart å’Œ JavaScript éƒ½åŒ…å«ä¸€ä¸ªæ¡ä»¶è¿ç®—ç¬¦ (`?:`) ç”¨äºè¯„ä¼°è¡¨è¾¾å¼ã€‚ä¸€äº›å¼€å‘äººå‘˜å°†å…¶ç§°ä¸ºä¸‰å…ƒè¿ç®—ç¬¦ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸‰ä¸ªæ“ä½œæ•°ã€‚ç”±äº Dart è¿˜æœ‰å¦ä¸€ä¸ªéœ€è¦ä¸‰ä¸ªæ“ä½œæ•°çš„è¿ç®—ç¬¦ (`[]=`)ï¼Œå› æ­¤å°†æ­¤è¿ç®—ç¬¦ (`?:`) ç§°ä¸ºæ¡ä»¶è¿ç®—ç¬¦ã€‚æ­¤è¿ç®—ç¬¦å¯¹è¡¨è¾¾å¼çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº [if-else][] å¯¹è¯­å¥çš„å·¥ä½œæ–¹å¼ã€‚

```js
let visibility = isPublic ? "public" : "private";
```

```dart
final visibility = isPublic ? 'public' : 'private';
```

### èµ‹å€¼è¿ç®—ç¬¦

ä½¿ç”¨ (`=`) è¿ç®—ç¬¦æ¥èµ‹å€¼ã€‚

```dart
// å°† value èµ‹ç»™ a
a = value;
```

æ­¤è¿ç®—ç¬¦è¿˜æœ‰ä¸€ä¸ªç©ºå€¼æ„ŸçŸ¥å˜ä½“ (`??=`)ã€‚

è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [ç©ºå€¼

[_anonymous_ functions]: https://en.wikipedia.org/wiki/Anonymous_function
[_generator functions_]: /language/functions#generators
[if-else]: /language/branches#if


å¦‚æœ`maybePerson`çš„å€¼ä¸º`null`ï¼ŒDartå°†å¿½ç•¥æ•´ä¸ªçº§è”ã€‚

## é›†åˆ

æœ¬èŠ‚ä»‹ç»äº†Dartä¸­çš„ä¸€äº›é›†åˆç±»å‹ï¼Œå¹¶å°†å®ƒä»¬ä¸JavaScriptä¸­çš„ç±»ä¼¼ç±»å‹è¿›è¡Œäº†æ¯”è¾ƒã€‚

### åˆ—è¡¨

Dartä»¥ä¸JavaScriptæ•°ç»„ç›¸åŒçš„æ–¹å¼ç¼–å†™åˆ—è¡¨æ–‡å­—ã€‚Dartä½¿ç”¨æ–¹æ‹¬å·æ‹¬èµ·åˆ—è¡¨ï¼Œå¹¶ç”¨é€—å·åˆ†éš”å€¼ã€‚

```dart
// åˆå§‹åŒ–åˆ—è¡¨å¹¶æŒ‡å®šå®Œæ•´ç±»å‹
final List<String> list1 = <String>['one', 'two', 'three'];

// ä½¿ç”¨ç®€å†™ç±»å‹åˆå§‹åŒ–åˆ—è¡¨
final list2 = <String>['one', 'two', 'three'];

// Dartä¹Ÿå¯ä»¥æ¨æ–­ç±»å‹
final list3 = ['one', 'two', 'three'];
```

ä»¥ä¸‹ä»£ç ç¤ºä¾‹æ¦‚è¿°äº†å¯ä»¥åœ¨Dart `List`ä¸Šæ‰§è¡Œçš„åŸºæœ¬æ“ä½œã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ç´¢å¼•è¿ç®—ç¬¦ä»`List`ä¸­æ£€ç´¢å€¼ã€‚

```dart
final fruits = <String>['apple', 'orange', 'pear'];
final fruit = fruits[1];
```

ä½¿ç”¨`add`æ–¹æ³•å°†å€¼æ·»åŠ åˆ°`List`çš„æœ«å°¾ã€‚ä½¿ç”¨`addAll`æ–¹æ³•æ·»åŠ å¦ä¸€ä¸ª`List`ï¼š

```dart
final fruits = <String>['apple', 'orange', 'pear'];
fruits.add('peach');
fruits.addAll(['kiwi', 'mango']);
```

ä½¿ç”¨`insert`æ–¹æ³•åœ¨ç‰¹å®šä½ç½®æ’å…¥å€¼ã€‚ä½¿ç”¨`insertAll`æ–¹æ³•åœ¨ç‰¹å®šä½ç½®æ’å…¥å¦ä¸€ä¸ª`List`ï¼š

```dart
final fruits = <String>['apple', 'orange', 'pear'];
fruits.insert(0, 'peach');
fruits.insertAll(0, ['kiwi', 'mango']);
```

ä½¿ç”¨ç´¢å¼•å’Œèµ‹å€¼è¿ç®—ç¬¦æ›´æ–°`List`ä¸­çš„å€¼ï¼š

```dart
final fruits = <String>['apple', 'orange', 'pear'];
fruits[2] = 'peach';
```

ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä»`List`ä¸­åˆ é™¤é¡¹ç›®ï¼š

```dart
final fruits = <String>['apple', 'orange', 'pear'];
// ä»åˆ—è¡¨ä¸­åˆ é™¤å€¼'pear'ã€‚
fruits.remove('pear');
// ä»åˆ—è¡¨ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ã€‚
fruits.removeLast();
// ä»åˆ—è¡¨ä¸­åˆ é™¤ä½ç½®ä¸º1çš„å…ƒç´ ã€‚
fruits.removeAt(1);
// ä»åˆ—è¡¨ä¸­åˆ é™¤ä½ç½®å¤§äºæˆ–ç­‰äºstartï¼ˆ1ï¼‰ä¸”å°äºendï¼ˆ3ï¼‰çš„å…ƒç´ ã€‚
fruits.removeRange(1, 3);
// ä»åˆ—è¡¨ä¸­åˆ é™¤ä¸ç»™å®šè°“è¯åŒ¹é…çš„æ‰€æœ‰å…ƒç´ ã€‚
fruits.removeWhere((fruit) => fruit.contains('p'));
```

ä½¿ç”¨`length`è·å–`List`ä¸­çš„å€¼çš„æ•°é‡ï¼š

```dart
final fruits = <String>['apple', 'orange', 'pear'];
assert(fruits.length == 3);
```

ä½¿ç”¨`isEmpty`æ£€æŸ¥`List`æ˜¯å¦ä¸ºç©ºï¼š

```dart
var fruits = [];
assert(fruits.isEmpty);
```

ä½¿ç”¨`isNotEmpty`æ£€æŸ¥`List`æ˜¯å¦ä¸ä¸ºç©ºï¼š

```dart
final fruits = <String>['apple', 'orange', 'pear'];
assert(fruits.isNotEmpty);
```

#### Filled

Dartçš„`List`ç±»åŒ…æ‹¬ä¸€ç§åˆ›å»ºæ¯ä¸ªé¡¹ç›®å…·æœ‰ç›¸åŒå€¼çš„åˆ—è¡¨çš„æ–¹æ³•ã€‚`filled`æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º`n`çš„å›ºå®šé•¿åº¦åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªé¡¹ç›®éƒ½å…·æœ‰ä¸€ä¸ªé»˜è®¤å€¼ã€‚ä»¥ä¸‹ç¤ºä¾‹åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«3ä¸ªé¡¹ç›®çš„åˆ—è¡¨ï¼š

```dart
final list1 = List.filled(3, 'a'); // åˆ›å»º: [ 'a', 'a', 'a' ]
```

- é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨æ— æ³•å‘æ­¤åˆ—è¡¨æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚è¦å…è®¸æ­¤åˆ—è¡¨æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼Œè¯·åœ¨å‚æ•°åˆ—è¡¨çš„æœ«å°¾æ·»åŠ `, growable: true`ã€‚
- æ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬çš„ç´¢å¼•å€¼è®¿é—®å’Œæ›´æ–°æ­¤åˆ—è¡¨çš„å…ƒç´ ã€‚

#### ç”Ÿæˆ

Dartçš„`List`ç±»åŒ…æ‹¬ä¸€ç§åˆ›å»ºé€’å¢å€¼åˆ—è¡¨çš„æ–¹æ³•ã€‚`generate`æ„é€ å‡½æ•°ä½¿ç”¨æ¨¡æ¿åˆ›å»ºå¤§å°ä¸º`n`çš„å›ºå®šé•¿åº¦åˆ—è¡¨çš„å…ƒç´ å€¼ã€‚æ­¤æ¨¡æ¿å°†ç´¢å¼•ä½œä¸ºå‚æ•°ã€‚

```dart
// åˆ›å»º: [ 'a0', 'a1', 'a2' ]
final list1 = List.generate(3, (index) => 'a$index');
```

### é›†åˆ

ä¸JavaScriptä¸åŒï¼ŒDartæ”¯æŒä½¿ç”¨æ–‡å­—å®šä¹‰`Set`ã€‚Dartä»¥ä¸åˆ—è¡¨ç›¸åŒçš„æ–¹å¼å®šä¹‰é›†åˆï¼Œä½†ä½¿ç”¨èŠ±æ‹¬å·è€Œä¸æ˜¯æ–¹æ‹¬å·ã€‚é›†åˆæ˜¯æ— åºé›†åˆï¼ŒåªåŒ…å«å”¯ä¸€é¡¹ã€‚Dartä½¿ç”¨å“ˆå¸Œç å¼ºåˆ¶è¿™äº›é¡¹çš„å”¯ä¸€æ€§ï¼Œè¿™æ„å‘³ç€å¯¹è±¡éœ€è¦å“ˆå¸Œå€¼æ‰èƒ½å­˜å‚¨åœ¨`Set`ä¸­ã€‚

:::note
åœ¨Dartä¸­ï¼Œå“ˆå¸Œå€¼é»˜è®¤ä¸ºå¯¹è±¡çš„å®ä¾‹ï¼Œä½†æ‚¨å¯ä»¥é‡å†™å®ƒä»¥ä½¿ç”¨ä¸€ç»„å±æ€§ã€‚è¦äº†è§£æ›´å¤šï¼Œè¯·å‚é˜…[`hashCode`][]å±æ€§é¡µé¢ã€‚
:::

ä»¥ä¸‹ä»£ç ç‰‡æ®µæ˜¾ç¤ºäº†å¦‚ä½•åˆå§‹åŒ–`Set`ï¼š

```dart
final abc = {'a', 'b', 'c'};
```

åˆ›å»ºç©ºé›†åˆçš„è¯­æ³•å¯èƒ½ä¸€å¼€å§‹çœ‹èµ·æ¥æœ‰ç‚¹æ··ä¹±ï¼Œå› ä¸ºæŒ‡å®šç©ºèŠ±æ‹¬å·ï¼ˆ`{}`ï¼‰ä¼šåˆ›å»ºä¸€ä¸ªç©ºçš„`Map`ã€‚è¦åˆ›å»ºä¸€ä¸ªç©ºçš„`Set`ï¼Œè¯·åœ¨`{}`å£°æ˜ä¹‹å‰åŠ ä¸Šç±»å‹å‚æ•°æˆ–å°†`{}`åˆ†é…ç»™`Set`ç±»å‹çš„å˜é‡ï¼š

```dart
final names = <String>{};
// Set<String> names = {}; // è¿™ä¹Ÿå¯ä»¥ã€‚
// final names = {}; // åˆ›å»ºä¸€ä¸ªç©ºæ˜ å°„ï¼Œè€Œä¸æ˜¯é›†åˆã€‚
```

ä»¥ä¸‹ç¤ºä¾‹æ¦‚è¿°äº†å¯ä»¥åœ¨Dart `Set`ä¸Šæ‰§è¡Œçš„åŸºæœ¬æ“ä½œã€‚

ä½¿ç”¨`add`æ–¹æ³•å°†å€¼æ·»åŠ åˆ°`Set`ã€‚ä½¿ç”¨`addAll`æ–¹æ³•æ·»åŠ å¤šä¸ªå€¼ï¼š

```dart
final fruits = {'apple', 'orange', 'pear'};
fruits.add('peach');
fruits.addAll(['kiwi', 'mango']);
```

åœ¨`Set`ä¸­ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€åˆ é™¤å†…å®¹ï¼š

```dart
final fruits = {'apple', 'orange', 'pear'};
// ä»é›†åˆä¸­åˆ é™¤å€¼'pear'ã€‚
fruits.remove('pear');
// ä»é›†åˆä¸­åˆ é™¤æä¾›çš„åˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚
fruits.removeAll(['orange', 'apple']);
// åˆ é™¤ä¸ç»™å®šè°“è¯åŒ¹é…çš„é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚
fruits.removeWhere((fruit) => fruit.contains('p'));
```

ä½¿ç”¨`length`è·å–`Set`ä¸­çš„å€¼çš„æ•°é‡ï¼š

```dart
final fruits = {'apple', 'orange', 'pear'};
assert(fruits.length == 3);
```

ä½¿ç”¨`isEmpty`æ£€æŸ¥`Set`æ˜¯å¦ä¸ºç©ºï¼š

```dart
var fruits = <String>{};
assert(fruits.isEmpty);
```

ä½¿ç”¨`isNotEmpty`æ£€æŸ¥`Set`æ˜¯å¦ä¸ä¸ºç©ºï¼š

```dart
final fruits = {'apple', 'orange', 'pear'};
assert(fruits.isNotEmpty);
```

### æ˜ å°„

Dartä¸­çš„`Map`ç±»å‹ç±»ä¼¼äºJavaScriptä¸­çš„`Map`ç±»å‹ã€‚è¿™ä¸¤ç§ç±»å‹éƒ½å°†é”®ä¸å€¼å…³è”èµ·æ¥ã€‚å¦‚æœæ‰€æœ‰é”®å…·æœ‰ç›¸åŒç±»å‹ï¼Œåˆ™é”®å¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ç±»å‹ã€‚è¿™ä¸ªè§„åˆ™ä¹Ÿé€‚ç”¨äºå€¼ã€‚æ¯ä¸ªé”®æœ€å¤šå‡ºç°ä¸€æ¬¡ï¼Œä½†å¯ä»¥å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„å€¼ã€‚

DartåŸºäºå“ˆå¸Œè¡¨æ„å»ºå­—å…¸ã€‚è¿™æ„å‘³ç€é”®éœ€è¦æ˜¯å¯å“ˆå¸Œçš„ã€‚æ¯ä¸ªDartå¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªå“ˆå¸Œã€‚

:::note
åœ¨Dartä¸­ï¼Œå¯¹è±¡çš„å“ˆå¸Œå€¼é»˜è®¤ä¸ºä»å¯¹è±¡çš„æ ‡è¯†æ´¾ç”Ÿçš„å€¼ï¼Œå¹¶ä¸”ä¸å¯¹è±¡åªèƒ½ç­‰äºè‡ªèº«çš„ç›¸ç­‰å…¼å®¹ã€‚è¦å¼•å…¥åŸºäºå¯¹è±¡*å†…å®¹*çš„ç›¸ç­‰æ€§ï¼Œé‡å†™`hashCode`å’Œ`operator==`ã€‚
:::

è€ƒè™‘ä»¥ä¸‹ä½¿ç”¨æ–‡å­—åˆ›å»ºçš„ç®€å•`Map`ç¤ºä¾‹ï¼š

```dart
final gifts = {
  'first': 'partridge',
  'second': 'turtle doves',
  'fifth': 'golden rings'
};

final nobleGases = {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};
```

ä»¥ä¸‹ä»£ç ç¤ºä¾‹æ¦‚è¿°äº†å¯ä»¥åœ¨Dart `Map`ä¸Šæ‰§è¡Œçš„åŸºæœ¬æ“ä½œã€‚ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ç´¢å¼•è¿ç®—ç¬¦ä»`Map`ä¸­æ£€ç´¢å€¼ã€‚

```dart
final gifts = {'first': 'partridge'};
final gift = gifts['first'];
```

:::note
å¦‚æœæ˜ å°„ä¸åŒ…å«æŸ¥æ‰¾é”®ï¼Œåˆ™ç´¢å¼•è¿ç®—ç¬¦è¿”å›`null`ã€‚
:::

ä½¿ç”¨`containsKey`æ–¹æ³•æ£€æŸ¥`Map`æ˜¯å¦åŒ…å«é”®ã€‚

```dart
final gifts = {'first': 'partridge'};
assert(gifts.containsKey('fifth'));
```

ä½¿ç”¨ç´¢å¼•èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ`[]=`ï¼‰æ·»åŠ æˆ–æ›´æ–°`Map`ä¸­çš„æ¡ç›®ã€‚å¦‚æœ`Map`å°šæœªåŒ…å«é”®ï¼Œåˆ™Dartå°†æ·»åŠ è¯¥æ¡ç›®ã€‚å¦‚æœé”®å­˜åœ¨ï¼Œåˆ™Dartå°†æ›´æ–°å…¶å€¼ã€‚

```dart
final gifts = {'first': 'partridge'};
gifts['second'] = 'turtle'; // è¢«æ·»åŠ 
gifts['second'] = 'turtle doves'; // è¢«æ›´æ–°
```

ä½¿ç”¨`addAll`æ–¹æ³•æ·»åŠ å¦ä¸€ä¸ª`Map`ã€‚ä½¿ç”¨`addEntries`æ–¹æ³•å‘`Map`æ·»åŠ å…¶ä»–æ¡ç›®ã€‚

```dart
final gifts = {'first': 'partridge'};
gifts['second'] = 'turtle doves';
gifts.addAll({
  'second': 'turtle doves',
  'fifth': 'golden rings',
});
gifts.addEntries([
  MapEntry('second', 'turtle doves'),
  MapEntry('fifth', 'golden rings'),
]);
```

ä½¿ç”¨`remove`æ–¹æ³•ä»`Map`ä¸­åˆ é™¤æ¡ç›®ã€‚ä½¿ç”¨`removeWhere`æ–¹æ³•åˆ é™¤æ»¡è¶³ç»™å®šæµ‹è¯•çš„æ‰€æœ‰æ¡ç›®ã€‚

```dart
final gifts = {'first': 'partridge'};
gifts.remove('first');
gifts.removeWhere((key, value) => value == 'partridge');
```

ä½¿ç”¨`length`è·å–`Map`ä¸­é”®å€¼å¯¹çš„æ•°é‡ã€‚

```dart
final gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds';
assert(gifts.length == 2);
```

ä½¿ç”¨`isEmpty`æ£€æŸ¥`Map`æ˜¯å¦ä¸ºç©ºã€‚

```dart
final gifts = {};
assert(gifts.isEmpty);
```

ä½¿ç”¨`isNotEmpty`æ£€æŸ¥`Map`æ˜¯å¦ä¸ä¸ºç©ºã€‚

```dart
final gifts = {'first': 'partridge'};
assert(gifts.isNotEmpty);
```

### ä¸å¯ä¿®æ”¹

çº¯JavaScriptä¸æ”¯æŒä¸å¯å˜æ€§ã€‚Dartæä¾›äº†å¤šç§æ–¹æ³•æ¥ä½¿æ•°ç»„ã€é›†åˆæˆ–å­—å…¸ç­‰é›†åˆä¸å¯å˜ã€‚

- å¦‚æœé›†åˆæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ä¸”ä¸åº”è¢«ä¿®æ”¹ï¼Œè¯·ä½¿ç”¨`const`å…³é”®å­—ï¼š<br>
  `const fruits = <String>{'apple', 'orange', 'pear'};`
- å°†`Set`åˆ†é…ç»™`final`å­—æ®µï¼Œè¿™æ„å‘³ç€`Set`æœ¬èº«ä¸å¿…æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚è¿™ç¡®ä¿å­—æ®µä¸èƒ½è¢«å¦ä¸€ä¸ª`Set`è¦†ç›–ï¼Œä½†ä»å…è®¸ä¿®æ”¹`Set`çš„å¤§å°æˆ–å†…å®¹ï¼š<br>
  `final fruits = <String>{'apple', 'orange', 'pear'};`
- ä½¿ç”¨`unmodifiable`æ„é€ å‡½æ•°åˆ›å»ºé›†åˆç±»å‹çš„æœ€ç»ˆç‰ˆæœ¬ï¼ˆå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼‰ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªæ— æ³•æ”¹å˜å…¶å¤§å°æˆ–å†…å®¹çš„é›†åˆï¼š

```dart
final _set = Set<String>.unmodifiable(['a', 'b', 'c']);
final _list = List<String>.unmodifiable(['a', 'b', 'c']);
final _map = Map<String, String>.unmodifiable({'foo': 'bar'});
```

### å±•å¼€è¿ç®—ç¬¦

ä¸JavaScriptä¸€æ ·ï¼ŒDartæ”¯æŒä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ï¼ˆ`...`ï¼‰å’Œç©ºå®‰å…¨å±•å¼€è¿ç®—ç¬¦ï¼ˆ`...?`ï¼‰å°†åˆ—è¡¨åµŒå…¥å¦ä¸€ä¸ªåˆ—è¡¨ã€‚

```dart
var list1 = [1, 2, 3];
var list2 = [0, ...list1];ã€€// [0, 1, 2, 3]
// å½“è¦æ’å…¥çš„åˆ—è¡¨å¯èƒ½ä¸ºnullæ—¶ï¼š
list1 = null;
var list2 = [0, ...?list1]; // [0]
```

è¿™ä¹Ÿé€‚ç”¨äºé›†åˆå’Œæ˜ å°„ï¼š

```dart
// ä½¿ç”¨æ˜ å°„çš„å±•å¼€è¿ç®—ç¬¦
var map1 = {'foo': 'bar', 'key': 'value'};
var map2 = {'foo': 'baz', ...map1}; // {foo: bar, key: value}
// ä½¿ç”¨é›†åˆçš„å±•å¼€è¿ç®—ç¬¦
var set1 = {'foo', 'bar'};
var set2 = {'foo', 'baz', ...set1}; // {foo, baz, bar}
```

### é›†åˆ if/for

åœ¨Dartä¸­ï¼Œ`for`å’Œ`if`å…³é”®å­—åœ¨å¤„ç†é›†åˆæ—¶å…·æœ‰é™„åŠ åŠŸèƒ½ã€‚

é›†åˆ`if`è¯­å¥ä»…åœ¨æ»¡è¶³æŒ‡å®šæ¡ä»¶æ—¶åŒ…å«åˆ—è¡¨æ–‡å­—ä¸­çš„é¡¹ç›®ï¼š

```dart
var nav = [
  'Home',
  'Furniture',
  'Plants',
  if (promoActive) 'Outlet',
];
```

å¯¹äºæ˜ å°„å’Œé›†åˆï¼Œå®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼ã€‚

é›†åˆ`for`è¯­å¥å…è®¸å°†å¤šä¸ªé¡¹ç›®æ˜ å°„åˆ°å¦ä¸€ä¸ªåˆ—è¡¨ï¼š

```dart
var listOfInts = [1, 2, 3];
var listOfStrings = [
  '#0',
  for (var i in listOfInts) '#$i',
]; // [#0, #1, #2, #3]
```

å¯¹äºæ˜ å°„å’Œé›†åˆï¼Œå®ƒçš„å·¥ä½œæ–¹å¼ä¹Ÿç›¸åŒã€‚

## å¼‚æ­¥

ä¸JavaScriptä¸€æ ·ï¼ŒDartè™šæ‹Ÿæœºï¼ˆVMï¼‰è¿è¡Œå•ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå¤„ç†æ‰€æœ‰Dartä»£ç ã€‚è¿™æ„å‘³ç€è¿™é‡Œé€‚ç”¨ä¸å¼‚æ­¥ç›¸å…³çš„ç±»ä¼¼è§„åˆ™ã€‚æ‚¨çš„æ‰€æœ‰ä»£ç éƒ½æ˜¯åŒæ­¥è¿è¡Œçš„ï¼Œä½†æ‚¨å¯ä»¥æ ¹æ®æ‚¨ä½¿ç”¨çš„å¼‚æ­¥å·¥å…·ä»¥ä¸åŒçš„é¡ºåºå¤„ç†å®ƒã€‚ä»¥ä¸‹æ˜¯ä¸€äº›è¿™äº›æ„é€ çš„ç¤ºä¾‹ä»¥åŠå®ƒä»¬ä¸JavaScriptå¯¹åº”ç‰©çš„å…³ç³»ã€‚

### Futures

`Future`æ˜¯Dartçš„ç‰ˆæœ¬JavaScript `Promise`ã€‚ä¸¤è€…éƒ½æ˜¯å¼‚æ­¥æ“ä½œçš„*ç»“æœ*ï¼Œåœ¨ä»¥åè§£æã€‚

Dartæˆ–DartåŒ…ä¸­çš„å‡½æ•°å¯èƒ½è¿”å›`Future`ï¼Œè€Œä¸æ˜¯å®ƒä»¬è¡¨ç¤ºçš„å€¼ï¼Œå› ä¸ºå€¼å¯èƒ½è¦åˆ°ä»¥åæ‰èƒ½è·å¾—ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¤„ç†`Future`çš„æ–¹å¼ä¸JavaScriptä¸­çš„`Promise`ç›¸åŒã€‚

```js
const httpResponseBody = func();

httpResponseBody.then(value => {
  console.log(
    `Promise resolved to a value: ${value}`
  );
});
```

```dart
Future<String> httpResponseBody = func();

httpResponseBody.then((String value) {
  print('Future resolved to a value: $value');
});
```

ç±»ä¼¼åœ°ï¼Œ`Future`å¯ä»¥åƒ`Promise`ä¸€æ ·å¤±è´¥ã€‚æ•è·é”™è¯¯ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š

```js
httpResponseBody
  .then(...)
  .catch(err => {
    console.log(
      "Promise encountered an error before resolving."
    );
  });
```

```dart
httpResponseBody
  .then(...)
  .catchError((err) {
    print(
      'Future encountered an error before resolving.'
    );
  });
```

æ‚¨è¿˜å¯ä»¥åˆ›å»º`Future`ã€‚è¦åˆ›å»º`Future`ï¼Œè¯·å®šä¹‰å¹¶è°ƒç”¨`async`å‡½æ•°ã€‚å½“æ‚¨æœ‰ä¸€ä¸ªéœ€è¦æ˜¯`Future`çš„å€¼æ—¶ï¼Œå°†å‡½æ•°è½¬æ¢ä¸ºå¦‚ä¸‹ç¤ºä¾‹ã€‚

```dart
String str = 'String Value';
Future<String> strFuture = Future<String>.value(str);
```

#### Async/Await

å¦‚æœæ‚¨ç†Ÿæ‚‰JavaScriptä¸­çš„`Promise`ï¼Œæ‚¨å¯èƒ½ä¹Ÿç†Ÿæ‚‰`async`/`await`è¯­æ³•ã€‚è¿™ç§è¯­æ³•åœ¨Dartä¸­æ˜¯ç›¸åŒçš„ï¼šå‡½æ•°æ ‡è®°ä¸º`async`ï¼Œå¹¶ä¸”`async`å‡½æ•°å§‹ç»ˆè¿”å›`Future`ã€‚å¦‚æœå‡½æ•°è¿”å›`String`å¹¶æ ‡è®°ä¸º`async`ï¼Œå®ƒå°†è¿”å›`Future<String>`ã€‚å¦‚æœå®ƒä¸è¿”å›ä»»ä½•å†…å®¹ï¼Œä½†æ˜¯å®ƒæ˜¯`async`ï¼Œå®ƒå°†è¿”å›`Future<void>`ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•ç¼–å†™`async`å‡½æ•°ï¼š

```js
// è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„Promiseï¼Œ
// å› ä¸ºè¯¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„
async fetchString() {
  // é€šå¸¸åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–å¼‚æ­¥æ“ä½œã€‚
  return "String Value";
}
```

```dart
// è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„Futureï¼Œ
// å› ä¸ºè¯¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„
Future<String> fetchString() async {
  // é€šå¸¸åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–å¼‚æ­¥æ“ä½œã€‚
  return 'String Value';
}
```

è°ƒç”¨æ­¤`async`å‡½æ•°å¦‚ä¸‹ï¼š

```dart
Future<String> stringFuture = fetchString();
stringFuture.then((String str) {
  print(str); // 'String Value'
});
```

ä½¿ç”¨`await`å…³é”®å­—è·å–`Future`çš„å€¼ã€‚ä¸JavaScriptä¸€æ ·ï¼Œè¿™æ ·å¯ä»¥é¿å…è°ƒç”¨`then`æ¥è·å–å…¶å€¼ï¼Œå¹¶ä¸”å…è®¸æ‚¨ä»¥æ›´ç±»ä¼¼åŒæ­¥çš„æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç ã€‚ä¸JavaScriptä¸€æ ·ï¼Œåœ¨`async`ä¸Šä¸‹æ–‡ä¸­æ‰èƒ½ç­‰å¾…`Future`ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†å¦‚ä½•ç­‰å¾…`Future`è·å–å…¶å€¼ï¼š

```dart
// æˆ‘ä»¬åªèƒ½åœ¨asyncä¸Šä¸‹æ–‡ä¸­ç­‰å¾…Futureã€‚
Future<void> asyncFunction() async {
  var str = await fetchString();
  print(str); // 'String Value'
}
```

è¦äº†è§£æœ‰å…³`Future`å’Œ`async`/`await`è¯­æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[å¼‚æ­¥ç¼–ç¨‹][]æ•™ç¨‹ã€‚

### æµ

Dartå¼‚æ­¥å·¥å…·ç®±ä¸­çš„å¦ä¸€ä¸ªå·¥å…·æ˜¯`Stream`ã€‚è™½ç„¶JavaScriptæœ‰è‡ª

[`hashCode`]: {{site.dart-api}}/dart-core/Object/hashCode.html
[Asynchronous programming]: /libraries/async/async-await

#### åˆ›å»ºæµ

ä¸`Future`ä¸€æ ·ï¼Œä½ æœ‰å‡ ç§ä¸åŒçš„æ–¹æ³•æ¥åˆ›å»ºæµã€‚`Stream`ç±»å…·æœ‰ç”¨äºä»`Future`æˆ–`Iterable`åˆ›å»ºæµçš„å®ç”¨æ„é€ å‡½æ•°ï¼Œè¿˜å¯ä»¥åˆ›å»ºå®šæ—¶å‘å‡ºå€¼çš„æµã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[`Stream`][] APIé¡µé¢ã€‚

##### StreamController

å®ç”¨ç±»[`StreamController`][]å¯ä»¥åˆ›å»ºå’Œæ§åˆ¶æµã€‚å…¶streamå±æ€§å…¬å¼€äº†å®ƒæ§åˆ¶çš„æµã€‚å®ƒçš„æ–¹æ³•æä¾›äº†å‘è¯¥æµæ·»åŠ äº‹ä»¶çš„æ–¹æ³•ã€‚

ä¾‹å¦‚ï¼Œ`add`æ–¹æ³•å¯ä»¥å‘å‡ºæ–°çš„é¡¹ï¼Œè€Œ`close`æ–¹æ³•ä¼šå®Œæˆè¯¥æµã€‚

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†æµæ§åˆ¶å™¨çš„åŸºæœ¬ç”¨æ³•ï¼š

```dart
var listeners = 0;
StreamController<int>? controller;
controller = StreamController<int>(
  onListen: () {
    // æ¯æ¬¡æµæœ‰æ–°çš„ç›‘å¬å™¨æ—¶å‘å‡ºä¸€ä¸ªæ–°å€¼ã€‚
    controller!.add(listeners++);
    // åœ¨ç¬¬äº”ä¸ªç›‘å¬å™¨ä¹‹åå…³é—­è¯¥æµã€‚
    if (listeners > 5) controller.close();
  }
);
// è·å–æµæ§åˆ¶å™¨çš„æµ
var stream = controller.stream;
// ç›‘å¬æµ
stream.listen((int value) {
  print('$value');
});
```

##### å¼‚æ­¥ç”Ÿæˆå™¨

å¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°å¯ä»¥åˆ›å»ºæµã€‚è¿™äº›å‡½æ•°ç±»ä¼¼äºåŒæ­¥ç”Ÿæˆå™¨å‡½æ•°ï¼Œä½†ä½¿ç”¨`async*`å…³é”®å­—å¹¶è¿”å›ä¸€ä¸ª`Stream`ã€‚

åœ¨å¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°ä¸­ï¼Œ`yield`å…³é”®å­—å°†ç»™å®šçš„å€¼å‘é€åˆ°æµä¸­ã€‚`yield*`å…³é”®å­—åˆ™ä¸å…¶ä»–å¯è¿­ä»£å¯¹è±¡ä¸åŒï¼Œå®ƒç”¨äºé…åˆæµã€‚è¿™æ ·ï¼Œæ¥è‡ªå…¶ä»–æµçš„äº‹ä»¶å¯ä»¥è¢«å‘é€åˆ°è¿™ä¸ªæµä¸­ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸€æ—¦æ–°ç”Ÿæˆçš„æµå®Œæˆï¼Œå‡½æ•°å°±ä¼šç»§ç»­æ‰§è¡Œã€‚

```dart
Stream<int> asynchronousNaturalsTo(int n) async* {
  var k = 0;
  while (k < n) yield k++;
}

Stream<int> stream = asynchronousNaturalsTo(5);

// ä¾æ¬¡æ‰“å°å‡º0 1 2 3 4ã€‚
stream.forEach(print(value));
```

åœ¨[å¼‚æ­¥ç¼–ç¨‹][]æ–‡æ¡£ä¸­å¯ä»¥äº†è§£æ›´å¤šå…³äº`Future`ã€`Stream`å’Œå…¶ä»–å¼‚æ­¥åŠŸèƒ½çš„ä¿¡æ¯ã€‚

## ç±»

åœ¨Dartä¸­ï¼Œç±»ä¸JavaScriptä¸­çš„ç±»éå¸¸ç›¸ä¼¼ï¼Œå°½ç®¡JavaScriptç±»åœ¨æŠ€æœ¯ä¸Šæ›´åƒæ˜¯åŸå‹çš„åŒ…è£…å™¨ã€‚åœ¨Dartä¸­ï¼Œç±»æ˜¯è¯­è¨€çš„æ ‡å‡†ç‰¹æ€§ã€‚æœ¬èŠ‚ä»‹ç»åœ¨Dartä¸­å®šä¹‰å’Œä½¿ç”¨ç±»ä»¥åŠå®ƒä»¬ä¸JavaScriptçš„åŒºåˆ«ã€‚

### "this" ä¸Šä¸‹æ–‡

åœ¨Dartä¸­ï¼Œ`this`å…³é”®å­—æ¯”JavaScriptæ›´ç›´æ¥ã€‚åœ¨Dartä¸­ï¼Œä½ æ— æ³•å°†å‡½æ•°ç»‘å®šåˆ°`this`ï¼Œè€Œä¸”`this`æ°¸è¿œä¸ä¾èµ–äºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆå¦‚åœ¨JavaScriptä¸­ï¼‰ã€‚åœ¨Dartä¸­ï¼Œ`this`ä»…åœ¨ç±»å†…éƒ¨ä½¿ç”¨ï¼Œå¹¶ä¸”å§‹ç»ˆæŒ‡å‘å½“å‰å®ä¾‹ã€‚

### æ„é€ å‡½æ•°

æœ¬èŠ‚è®¨è®ºäº†Dartä¸­çš„æ„é€ å‡½æ•°ä¸JavaScriptçš„ä¸åŒä¹‹å¤„ã€‚

#### æ ‡å‡†æ„é€ å‡½æ•°

æ ‡å‡†çš„ç±»æ„é€ å‡½æ•°çœ‹èµ·æ¥ä¸JavaScriptçš„æ„é€ å‡½æ•°éå¸¸ç›¸ä¼¼ã€‚åœ¨Dartä¸­ï¼Œ`constructor`å…³é”®å­—è¢«å®Œæ•´çš„ç±»åæ›¿ä»£ï¼Œå¹¶ä¸”æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»æ˜ç¡®æŒ‡å®šç±»å‹ã€‚åœ¨Dartä¸­ï¼Œæ›¾ç»éœ€è¦ä½¿ç”¨`new`å…³é”®å­—æ¥åˆ›å»ºç±»å®ä¾‹ï¼Œä½†ç°åœ¨æ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”ä¸å†æ¨èä½¿ç”¨ã€‚

```dart
class Point {
  final double x;
  final double y;

  Point(double x, double y) : this.x = x, this.y = y { }
}

// åˆ›å»ºPointç±»çš„æ–°å®ä¾‹
Point p = Point(3, 5);
```

#### åˆå§‹åŒ–åˆ—è¡¨

ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥ç¼–å†™ä½ çš„æ„é€ å‡½æ•°ã€‚å°†åˆå§‹åŒ–åˆ—è¡¨æ’å…¥æ„é€ å‡½æ•°çš„å‚æ•°å’Œå‡½æ•°ä½“ä¹‹é—´ã€‚

```dart
class Point {
  ...
  Point.fromJson(Map<String, double> json)
      : x = json['x']!,
        y = json['y']! {
    print('In Point.fromJson(): ($x, $y)');
  }
  ...
}
```

#### æ„é€ å‡½æ•°å‚æ•°

åœ¨æ„é€ å‡½æ•°ä¸­ç¼–å†™ä»£ç æ¥ä¸ºç±»å­—æ®µèµ‹å€¼å¯èƒ½ä¼šæ„Ÿè§‰åƒæ˜¯åˆ›å»ºæ ·æ¿ä»£ç ï¼Œæ‰€ä»¥Dartæä¾›äº†ä¸€äº›è¯­æ³•ç³–ï¼Œç§°ä¸º[åˆå§‹åŒ–å‚æ•°][]ï¼Œä»¥ç®€åŒ–æ­¤è¿‡ç¨‹ï¼š

```dart
class Point {
  double x;
  double y;

  // åœ¨æ„é€ å‡½æ•°ä½“è¿è¡Œä¹‹å‰è®¾ç½®xå’Œyçš„è¯­æ³•ç³–ã€‚
  Point(this.x, this.y);
}

// åˆ›å»ºPointç±»çš„æ–°å®ä¾‹
Point p = Point(3, 5);
```

ä¸å‡½æ•°ç±»ä¼¼ï¼Œæ„é€ å‡½æ•°å¯ä»¥é‡‡ç”¨å®šä½æˆ–å‘½åå‚æ•°çš„æ–¹å¼ï¼š

```dart
class Point {
  ...
  // ä½¿ç”¨å¯é€‰çš„å®šä½å‚æ•°
  Point(this.x, [this.y = 5]);
  // ä½¿ç”¨å‘½åå‚æ•°
  Point({required this.y, this.x = 5});
  // ä½¿ç”¨å®šä½å‚æ•°å’Œå‘½åå‚æ•°
  Point(int x, int y, {bool multiply}) {
    ...
  }
  ...
}
```

#### å‘½åæ„é€ å‡½æ•°

ä¸JavaScriptä¸åŒï¼ŒDartå…è®¸ç±»å…·æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡å…è®¸ä½ ä¸ºå®ƒä»¬å‘½åæ¥å®ç°ã€‚ä½ å¯ä»¥é€‰æ‹©æœ‰ä¸€ä¸ªæœªå‘½åçš„æ„é€ å‡½æ•°ï¼Œä»»ä½•å…¶ä»–æ„é€ å‡½æ•°å¿…é¡»å…·æœ‰åç§°ï¼š

```dart
const double xOrigin = 0;
const double yOrigin = 0;

class Point {
  double x = 0;
  double y = 0;

  Point(this.x, this.y);

  // å‘½åæ„é€ å‡½æ•°
  Point.origin()
      : x = xOrigin,
        y = yOrigin;
}
```

#### constæ„é€ å‡½æ•°

è¦åˆ›å»ºä¸å¯å˜ç±»å®ä¾‹ï¼Œè¯·ä½¿ç”¨`const`æ„é€ å‡½æ•°ã€‚å…·æœ‰`const`æ„é€ å‡½æ•°çš„ç±»åªèƒ½æœ‰`final`å®ä¾‹å˜é‡ã€‚

```dart
class ImmutablePoint {
  final double x, y;

  const ImmutablePoint(this.x, this.y);
}
```

#### æ„é€ å‡½æ•°é‡å®šå‘

ä½ å¯ä»¥ä»å…¶ä»–æ„é€ å‡½æ•°è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä»¥é˜²æ­¢ä»£ç é‡å¤æˆ–ä¸ºå‚æ•°æ·»åŠ å…¶ä»–é»˜è®¤å€¼ï¼š

```dart
class Point {
  double x, y;

  // è¯¥ç±»çš„ä¸»æ„é€ å‡½æ•°ã€‚
  Point(this.x, this.y);

  // å§”æ‰˜ç»™ä¸»æ„é€ å‡½æ•°ã€‚
  Point.alongXAxis(double x) : this(x, 0);
}
```

#### å·¥å‚æ„é€ å‡½æ•°

å½“ä½ ä¸éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å®ä¾‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚æ„é€ å‡½æ•°ã€‚ä¸€ä¸ªä¾‹å­æ˜¯å½“è¿”å›ä¸€ä¸ªå·²ç¼“å­˜çš„å®ä¾‹æ—¶ï¼š

```dart
class Logger {
  static final Map<String, Logger> _cache =
      <String, Logger>{};
 
  final String name;
 
  // å·¥å‚æ„é€ å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªç¼“å­˜çš„å‰¯æœ¬ï¼Œ
  // å¦‚æœè¿˜æ²¡æœ‰å¯ç”¨çš„å‰¯æœ¬ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬ã€‚
  factory Logger(String name) {
    return _cache.putIfAbsent(
        name, () => _cache[name] ??= Logger._internal(name);
  }

  // ä»…ä¾›å†…éƒ¨ä½¿ç”¨çš„ç§æœ‰æ„é€ å‡½æ•°
  Logger._internal(this.name);
}
```

### æ–¹æ³•

åœ¨Dartå’ŒJavaScriptä¸­ï¼Œæ–¹æ³•ç”¨ä½œä¸ºå¯¹è±¡æä¾›è¡Œä¸ºçš„å‡½æ•°ã€‚

```js
function doSomething() { // è¿™æ˜¯ä¸€ä¸ªå‡½æ•°
  // å®ç°...
}

class Example {
  doSomething() { // è¿™æ˜¯ä¸€ä¸ªæ–¹æ³•
    // å®ç°...
  }
}
```

```dart
void doSomething() { // è¿™æ˜¯ä¸€ä¸ªå‡½æ•°
 // å®ç°...
}

class Example {
 void doSomething() { // è¿™æ˜¯ä¸€ä¸ªæ–¹æ³•
   // å®ç°...
 }
}
```

### æ‰©å±•ç±»

Dartå…è®¸ç±»æ‰©å±•å¦ä¸€ä¸ªç±»ï¼Œä¸JavaScriptç±»ä¼¼ã€‚

```dart
class Animal {
  int eyes;
 
  Animal(this.eyes);
 
  makeNoise() {
    print('???');
  }
}

class Cat extends Animal {
  Cat(): super(2);

  @override
  makeNoise() {
    print('Meow');
  }
}
Animal animal = Cat();
print(animal.eyes); // 2
animal.makeNoise(); // Meow
```

å½“è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œè¯·ä½¿ç”¨`@override`æ³¨è§£ã€‚è™½ç„¶æ­¤æ³¨è§£æ˜¯å¯é€‰çš„ï¼Œä½†å®ƒè¡¨ç¤ºè¦†ç›–æ˜¯æœ‰æ„çš„ã€‚å¦‚æœè¯¥æ–¹æ³•å®é™…ä¸Šä¸æ˜¯è¦†ç›–äº†è¶…ç±»æ–¹æ³•ï¼Œåˆ™Dartåˆ†æå™¨å°†æ˜¾ç¤ºè­¦å‘Šã€‚

ä»ç„¶å¯ä»¥ä½¿ç”¨`super`å…³é”®å­—è°ƒç”¨è¢«è¦†ç›–çš„çˆ¶ç±»æ–¹æ³•ï¼š

```dart
class Cat extends Animal {
  ...
  @override
  makeNoise() {
    print('Meow');
    super.makeNoise();
  }
}
Animal animal = Cat();
animal.makeNoise(); // Meow
                    // ???
```

[`Stream`]: {{site.dart-api}}/dart-async/Stream-class.html
[`StreamController`]: {{site.dart-api}}/dart-async/StreamController-class.html
[asynchronous programming]: /libraries/async/using-streams
[initializing parameters]: /language/constructors


